<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <div th:switch="${pervPosl}">
        <div th:case="all">
            <title>Договоры залога на сопровождении (все):</title>
        </div>
        <div th:case="perv">
            <title>Договоры залога на сопровождении (первичные):</title>
        </div>
        <div th:case="posl">
            <title>Договоры залога на сопровождении (последующие):</title>
        </div>
    </div>
    <style type="text/css">
        body {
            padding: 50px;
        }
        .containerTable{
            width: 3000px;
        }
        .pledgeAgreement, .pledgeAgreement td {
            border: 1px solid lightgray;
            padding: 5px;
            table-layout: fixed;
        }
    </style>
</head>
<body>
<div th:switch="${pervPosl}">
    <div th:case="all">
        <h1>Договоры залога на сопровождении (все):</h1>
    </div>
    <div th:case="perv">
        <h1>Договоры залога на сопровождении (первичные):</h1>
    </div>
    <div th:case="posl">
        <h1>Договоры залога на сопровождении (последующие):</h1>
    </div>
</div>
<div class="containerTable">
    <table class="pledgeAgreement">
        <thead>
        <tr>
            <th>№ДЗ</th>
            <th>Дата начала ДЗ</th>
            <th>Дата окончания ДЗ</th>
            <th>Залогодатель</th>
            <th>Описание предметов залога</th>
            <th>Количество предметов залога</th>
            <th>Вид обеспечения</th>
            <th>РС ДЗ</th>
            <th>ЗС ДЗ</th>
            <th>РС ЗЗ</th>
            <th>ЗС ЗЗ</th>
            <th>СС</th>
            <th>Дата ЗЗ</th>
            <th>Дата мониторинга</th>
            <th>Рузультат мониторинга</th>
        </tr>
        </thead>
        <tbody>
        <div th:switch="${pervPosl}">
            <div th:case="all">
                <div th:each="pledgor : ${employee.getClients()}">
                    <tr th:each="pe : ${pledgor.getPledgeAgreements()}">
                        <td>
                            <a th:href="@{/pledge_agreement_detail(pledgeAgreementId=${pe.getPledgeAgreementId()})}" href="pledge_agreement_detail.html"
                               th:text="${pe.getNumPE()}">н/д</a>
                        </td>

                        <td th:text="${pe.getDateBeginPE()}"></td>

                        <td th:text="${pe.getDateEndPE()}"></td>

                        <div th:switch="${pledgor.getTypeOfClient()}">
                            <div th:case="юл">
                                <td>
                                    <a th:href="@{/pledgor(pledgorId=${pledgor.getClientId()})}" href="pledgor.html"
                                       th:text="${pledgor.getClientLegalEntity().getOrganizationalForm() + ' ' + pledgor.getClientLegalEntity().getName()}"></a>
                                </td>
                            </div>
                            <div th:case="фл">
                                <td>
                                    <a th:href="@{/pledgor(pledgorId=${pledgor.getClientId()})}" href="pledgor.html"
                                       th:text="${pledgor.getClientIndividual().getSurname() + ' ' + pledgor.getClientIndividual().getName()}"></a>
                                </td>
                            </div>
                        </div>

                        <td>
                            <ol>
                                <div th:if="${pe.getPledgeSubjects().size() &gt; 5}">
                                    <div th:each="ps, countStat: ${pe.getPledgeSubjects()}">
                                        <div th:if="${countStat.index &lt; 5}" th:remove="tag">
                                            <li>
                                                <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                                    href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                            </li>
                                        </div>
                                    </div>
                                    <span>...</span>
                                </div>
                                <div th:unless="${pe.getPledgeSubjects().size() &gt; 5}">
                                    <div th:each="ps : ${pe.getPledgeSubjects()}">
                                        <li>
                                            <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                               href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                        </li>
                                    </div>
                                </div>
                            </ol>
                            <a th:href="@{/pledge_subjects(pledgeAgreementId=${pe.getPledgeAgreementId()})}" href="pledge_subjects.html" th:text="подробнее">подробнее</a>
                        </td>

                        <td th:text="${pe.getPledgeSubjects().size()}">0</td>

                        <td th:text="${@pledgeAgreementService.getTypeOfCollateral(pe.getPledgeAgreementId())}">н/д</td>

                        <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsDz(pe.getPledgeAgreementId()))}">0.00</td>

                        <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsDz(pe.getPledgeAgreementId()))}">0.00</td>

                        <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsZz(pe.getPledgeAgreementId()))}">0.00</td>

                        <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsZz(pe.getPledgeAgreementId()))}">0.00</td>

                        <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getSs(pe.getPledgeAgreementId()))}">0.00</td>

                        <td>
                            <div th:each="dateOfConclusion : ${@pledgeAgreementService.getDatesOfConclusion(pe.getPledgeAgreementId())}">
                                <span th:text="${dateOfConclusion}">н/д</span>
                            </div>
                        </td>

                        <td>
                            <div th:each="dateOfMonitoring : ${@pledgeAgreementService.getDatesOfMonitoring(pe.getPledgeAgreementId())}">
                                <span th:text="${dateOfMonitoring}">н/д</span>
                            </div>
                        </td>

                        <td>
                            <div th:each="resultsOfMonitoring : ${@pledgeAgreementService.getResultsOfMonitoring(pe.getPledgeAgreementId())}">
                                <span th:text="${resultsOfMonitoring}">н/д</span>
                            </div>
                        </td>
                    </tr>
                </div>
            </div>
            <div th:case="perv">
                <div th:each="pledgor : ${employee.getClients()}">
                    <div th:each="pe : ${@pledgeAgreementService.getPledgeEgreementsByPledgorIdAndPervPosl(pledgor.getClientId(), 'перв')}">
                                <tr>
                                    <td>
                                        <a th:href="@{/pledge_agreement_detail(pledgeAgreementId=${pe.getPledgeAgreementId()})}" href="pledge_agreement_detail.html"
                                           th:text="${pe.getNumPE()}">н/д</a>
                                    </td>
                                    <!--<td th:text="${pe.getNumPE()}"></td>-->

                                    <td th:text="${pe.getDateBeginPE()}"></td>

                                    <td th:text="${pe.getDateEndPE()}"></td>

                                    <div th:switch="${pledgor.getTypeOfClient()}">
                                        <div th:case="юл">
                                            <td>
                                                <a th:href="@{/pledgor(pledgorId=${pledgor.getClientId()})}" href="pledgor.html"
                                                   th:text="${pledgor.getClientLegalEntity().getOrganizationalForm() + ' ' + pledgor.getClientLegalEntity().getName()}"></a>
                                            </td>
                                        </div>
                                        <div th:case="фл">
                                            <td>
                                                <a th:href="@{/pledgor(pledgorId=${pledgor.getClientId()})}" href="pledgor.html"
                                                   th:text="${pledgor.getClientIndividual().getSurname() + ' ' + pledgor.getClientIndividual().getName()}"></a>
                                            </td>
                                        </div>
                                    </div>

                                    <td>
                                        <ol>
                                            <div th:if="${pe.getPledgeSubjects().size() &gt; 5}">
                                                <div th:each="ps, countStat: ${pe.getPledgeSubjects()}">
                                                    <div th:if="${countStat.index &lt; 5}" th:remove="tag">
                                                        <li>
                                                            <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                                               href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                                        </li>
                                                    </div>
                                                </div>
                                                <span>...</span>
                                            </div>
                                            <div th:unless="${pe.getPledgeSubjects().size() &gt; 5}">
                                                <div th:each="ps : ${pe.getPledgeSubjects()}">
                                                    <li>
                                                        <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                                           href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                                    </li>
                                                </div>
                                            </div>
                                        </ol>
                                        <a th:href="@{/pledge_subjects(pledgeAgreementId=${pe.getPledgeAgreementId()})}" href="pledge_subjects.html" th:text="подробнее">подробнее</a>
                                    </td>

                                    <td th:text="${pe.getPledgeSubjects().size()}">0</td>

                                    <td th:text="${@pledgeAgreementService.getTypeOfCollateral(pe.getPledgeAgreementId())}">н/д</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsDz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsDz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsZz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsZz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getSs(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td>
                                        <div th:each="dateOfConclusion : ${@pledgeAgreementService.getDatesOfConclusion(pe.getPledgeAgreementId())}">
                                            <span th:text="${dateOfConclusion}">н/д</span>
                                        </div>
                                    </td>

                                    <td>
                                        <div th:each="dateOfMonitoring : ${@pledgeAgreementService.getDatesOfMonitoring(pe.getPledgeAgreementId())}">
                                            <span th:text="${dateOfMonitoring}">н/д</span>
                                        </div>
                                    </td>

                                    <td>
                                        <div th:each="resultsOfMonitoring : ${@pledgeAgreementService.getResultsOfMonitoring(pe.getPledgeAgreementId())}">
                                            <span th:text="${resultsOfMonitoring}">н/д</span>
                                        </div>
                                    </td>
                                </tr>
                    </div>
                </div>
            </div>
            <div th:case="posl">
                <div th:each="pledgor : ${employee.getClients()}">
                    <div th:each="pe : ${@pledgeAgreementService.getPledgeEgreementsByPledgorIdAndPervPosl(pledgor.getClientId(), 'посл')}">
                                <tr>
                                    <td>
                                        <a th:href="@{/pledge_agreement_detail(pledgeAgreementId=${pe.getPledgeAgreementId()})}" href="pledge_agreement_detail.html"
                                           th:text="${pe.getNumPE()}">н/д</a>
                                    </td>
                                    <!--<td th:text="${pe.getNumPE()}"></td>-->

                                    <td th:text="${pe.getDateBeginPE()}"></td>

                                    <td th:text="${pe.getDateEndPE()}"></td>

                                    <div th:switch="${pledgor.getTypeOfClient()}">
                                        <div th:case="юл">
                                            <td>
                                                <a th:href="@{/pledgor(pledgorId=${pledgor.getClientId()})}" href="pledgor.html"
                                                   th:text="${pledgor.getClientLegalEntity().getOrganizationalForm() + ' ' + pledgor.getClientLegalEntity().getName()}"></a>
                                            </td>
                                        </div>
                                        <div th:case="фл">
                                            <td>
                                                <a th:href="@{/pledgor(pledgorId=${pledgor.getClientId()})}" href="pledgor.html"
                                                   th:text="${pledgor.getClientIndividual().getSurname() + ' ' + pledgor.getClientIndividual().getName()}"></a>
                                            </td>
                                        </div>
                                    </div>

                                    <td>
                                        <ol>
                                            <div th:if="${pe.getPledgeSubjects().size() &gt; 5}">
                                                <div th:each="ps, countStat: ${pe.getPledgeSubjects()}">
                                                    <div th:if="${countStat.index &lt; 5}" th:remove="tag">
                                                        <li>
                                                            <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                                               href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                                        </li>
                                                    </div>
                                                </div>
                                                <span>...</span>
                                            </div>
                                            <div th:unless="${pe.getPledgeSubjects().size() &gt; 5}">
                                                <div th:each="ps : ${pe.getPledgeSubjects()}">
                                                    <li>
                                                        <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                                           href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                                    </li>
                                                </div>
                                            </div>
                                        </ol>
                                        <a th:href="@{/pledge_subjects(pledgeAgreementId=${pe.getPledgeAgreementId()})}" href="pledge_subjects.html" th:text="подробнее">подробнее</a>
                                    </td>

                                    <td th:text="${pe.getPledgeSubjects().size()}">0</td>

                                    <td th:text="${@pledgeAgreementService.getTypeOfCollateral(pe.getPledgeAgreementId())}">н/д</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsDz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsDz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsZz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsZz(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getSs(pe.getPledgeAgreementId()))}">0.00</td>

                                    <td>
                                        <div th:each="dateOfConclusion : ${@pledgeAgreementService.getDatesOfConclusion(pe.getPledgeAgreementId())}">
                                            <span th:text="${dateOfConclusion}">н/д</span>
                                        </div>
                                    </td>

                                    <td>
                                        <div th:each="dateOfMonitoring : ${@pledgeAgreementService.getDatesOfMonitoring(pe.getPledgeAgreementId())}">
                                            <span th:text="${dateOfMonitoring}">н/д</span>
                                        </div>
                                    </td>

                                    <td>
                                        <div th:each="resultsOfMonitoring : ${@pledgeAgreementService.getResultsOfMonitoring(pe.getPledgeAgreementId())}">
                                            <span th:text="${resultsOfMonitoring}">н/д</span>
                                        </div>
                                    </td>
                                </tr>
                    </div>
                </div>
            </div>
        </div>
        </tbody>
    </table>
</div>
</body>
</html>