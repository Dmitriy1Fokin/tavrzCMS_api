<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Результат поиска</title>
    <style type="text/css">
        body {
            padding: 50px;
        }
        .containerTable{
            width: 3000px;
        }
        .searchTable, .searchTable td {
            border: 1px solid lightgray;
            padding: 5px;
            table-layout: fixed;
        }
        .nav-item{
            display: inline;
        }
    </style>
</head>
<body>
<div th:replace="static/nav :: user_nav_bar"></div>
<h1>Результы поиска:</h1>
<div th:switch="${typeOfSearch}">
    <div th:case="loanAgreements">
        <div class="containerTable">
            <table class="searchTable">
                <thead>
                <tr>
                    <th>№п/п</th>
                    <th>№КД</th>
                    <th>Заемщик</th>
                    <th>Дата начала КД</th>
                    <th>Дата окончания КД</th>
                    <th>Сумма договора</th>
                    <th>%</th>
                    <th>Задолженность</th>
                    <th>ПФО</th>
                    <th>Кат.кач.</th>
                </tr>
                </thead>
                <tbody>
                <div th:each="la, countStat: ${loanAgreements}">
                    <tr>
                        <td th:text="${countStat.index + 1}"></td>
                        <td>
                            <a th:href="@{/loan_agreement_detail(loanAgreementId=${la.getLoanAgreementId()})}" href="loan_agreement_detail.html"
                               th:text="${la.getNumLA()}">№ КД</a>
                        </td>
                        <td>
                            <div th:switch="${la.getLoaner().getTypeOfClient()}">
                                <div th:case="юл">
                                    <a th:href="@{/loaner(loanerId=${la.getLoaner().getClientId()})}" href="loaner.html"
                                       th:text="${la.getLoaner().getClientLegalEntity().getOrganizationalForm() + ' ' + la.getLoaner().getClientLegalEntity().getName()}">Заемщик ЮЛ</a>
                                </div>
                                <div th:case="фл">
                                    <a th:href="@{/loaner(loanerId=${la.getLoaner().getClientId()})}" href="loaner.html"
                                       th:text="${la.getLoaner().getClientIndividual().getSurname() + ' ' + la.getLoaner().getClientIndividual().getName()}">Заемщик ФЛ</a>

                                </div>
                            </div>
                        </td>
                        <td th:text="${la.getDateBeginLA()}">н/д</td>
                        <td th:text="${la.getDateEndLA()}">н/д</td>
                        <td th:text="${#numbers.formatCurrency(la.getAmountLA())}">н/д</td>
                        <td th:text="${#numbers.formatPercent(la.getInterestRateLA(), 0, 1)}">н/д</td>
                        <td th:text="${#numbers.formatCurrency(la.getDebtLA())}">н/д</td>
                        <td th:text="${la.getPfo()}">н/д</td>
                        <td th:text="${la.getQualityCategory()}">н/д</td>
                    </tr>
                </div>
                </tbody>
            </table>
        </div>
    </div>
    <div th:case="pledgeAreements">
        <div class="containerTable">
            <table class="searchTable">
                <thead>
                <tr>
                    <th>№п/п</th>
                    <th>№ДЗ</th>
                    <th>Дата начала ДЗ</th>
                    <th>Дата окончания ДЗ</th>
                    <th>Залогодатель</th>
                    <th>Описание предметов залога</th>
                    <th>Количество предметов залога</th>
                    <th>Вид обеспечения</th>
                    <th>РС ДЗ</th>
                    <th>ЗС ДЗ</th>
                    <th>РС ЗЗ</th>
                    <th>ЗС ЗЗ</th>
                    <th>СС</th>
                    <th>Дата ЗЗ</th>
                    <th>Дата мониторинга</th>
                    <th>Рузультат мониторинга</th>
                </tr>
                </thead>
                <tbody>
                            <tr th:each="pa, countStat : ${pledgeAgreements}">
                                <td th:text="${countStat.index + 1}"></td>

                                <td>
                                    <a th:href="@{/pledge_agreement_detail(pledgeAgreementId=${pa.getPledgeAgreementId()})}" href="pledge_agreement_detail.html"
                                       th:text="${pa.getNumPA()}">н/д</a>
                                </td>

                                <td th:text="${pa.getDateBeginPA()}"></td>

                                <td th:text="${pa.getDateEndPA()}"></td>

                                <div th:switch="${pa.getPledgor().getTypeOfClient()}">
                                    <div th:case="юл">
                                        <td>
                                            <a th:href="@{/pledgor(pledgorId=${pa.getPledgor().getClientId()})}" href="pledgor.html"
                                               th:text="${pa.getPledgor().getClientLegalEntity().getOrganizationalForm() + ' ' + pa.getPledgor().getClientLegalEntity().getName()}"></a>
                                        </td>
                                    </div>
                                    <div th:case="фл">
                                        <td>
                                            <a th:href="@{/pledgor(pledgorId=${pa.getPledgor().getClientId()})}" href="pledgor.html"
                                               th:text="${pa.getPledgor().getClientIndividual().getSurname() + ' ' + pa.getPledgor().getClientIndividual().getName()}"></a>
                                        </td>
                                    </div>
                                </div>

                                <td>
                                    <ol>
                                        <div th:if="${pa.getPledgeSubjects().size() &gt; 5}">
                                            <div th:each="ps, countStat: ${pa.getPledgeSubjects()}">
                                                <div th:if="${countStat.index &lt; 5}" th:remove="tag">
                                                    <li>
                                                        <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                                           href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                                    </li>
                                                </div>
                                            </div>
                                            <span>...</span>
                                        </div>
                                        <div th:unless="${pa.getPledgeSubjects().size() &gt; 5}">
                                            <div th:each="ps : ${pa.getPledgeSubjects()}">
                                                <li>
                                                    <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}"
                                                       href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                                                </li>
                                            </div>
                                        </div>
                                    </ol>
                                    <a th:href="@{/pledge_subjects(pledgeAgreementId=${pa.getPledgeAgreementId()})}" href="pledge_subjects.html" th:text="подробнее">подробнее</a>
                                </td>

                                <td th:text="${pa.getPledgeSubjects().size()}">0</td>

                                <td th:text="${@pledgeAgreementService.getTypeOfCollateral(pa.getPledgeAgreementId())}">н/д</td>

                                <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsDz(pa.getPledgeAgreementId()))}">0.00</td>

                                <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsDz(pa.getPledgeAgreementId()))}">0.00</td>

                                <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getRsZz(pa.getPledgeAgreementId()))}">0.00</td>

                                <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getZsZz(pa.getPledgeAgreementId()))}">0.00</td>

                                <td th:text="${#numbers.formatCurrency(@pledgeAgreementService.getSs(pa.getPledgeAgreementId()))}">0.00</td>

                                <td>
                                    <div th:each="dateOfConclusion : ${@pledgeAgreementService.getDatesOfConclusion(pa.getPledgeAgreementId())}">
                                        <span th:text="${dateOfConclusion}">н/д</span>
                                    </div>
                                </td>

                                <td>
                                    <div th:each="dateOfMonitoring : ${@pledgeAgreementService.getDatesOfMonitoring(pa.getPledgeAgreementId())}">
                                        <span th:text="${dateOfMonitoring}">н/д</span>
                                    </div>
                                </td>

                                <td>
                                    <div th:each="resultsOfMonitoring : ${@pledgeAgreementService.getResultsOfMonitoring(pa.getPledgeAgreementId())}">
                                        <span th:text="${resultsOfMonitoring}">н/д</span>
                                    </div>
                                </td>
                            </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div th:case="pledgeSubjects">
        <table class="searchTable">
            <thead>
            <tr>
                <th>№п/п</th>
                <th>Наименование</th>
                <th>Вид обеспечения</th>
                <th>ОХП</th>
                <th>Ед.изм</th>
                <th>ОИП</th>
                <th>Вид ОИП</th>
                <th>Адрес</th>
                <th>РС ДЗ</th>
                <th>ЗС ДЗ</th>
                <th>РС ЗЗ</th>
                <th>ЗС ЗЗ</th>
                <th>СС</th>
                <th>Дата ЗЗ</th>
                <th>Дата Мониторинга</th>
                <th>Вид мониторинга</th>
                <th>Результат мониторинга</th>
                <th>Ликвидность</th>
                <th>Функция залога</th>
                <th>Обязательство страхования</th>
                <th>Наличие обременений</th>
            </tr>
            </thead>
            <tbody>
            <div th:each="ps, countStat : ${pledgeSubjects}">
                <tr>
                    <td th:text="${countStat.index + 1}"></td>

                    <td>
                        <a th:href="@{/pledge_subject_detail(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="pledge_subject_detail.html" th:text="${ps.getName()}">наименование</a>
                    </td>

                    <td th:text="${ps.getTypeOfCollateral()}">н/д</td>

                    <div th:switch="${ps.getTypeOfCollateral()}">
                        <div th:case="'Авто/спецтехника'">
                            <td th:text="${ps.getPledgeSubjectAuto().getHorsepower()}">0.00</td>
                            <td>л.с.</td>
                        </div>
                        <div th:case="Оборудование">
                            <td th:text="${ps.getPledgeSubjectEquipment().getProductivity()}">0.00</td>
                            <td th:text="${ps.getPledgeSubjectEquipment().getTypeOfProductivity()}">н/д</td>
                        </div>
                        <div th:case="ТМЦ">
                            <td th:text="${ps.getPledgeSubjectTBO().getCountOfTBO()}">0.00</td>
                            <td>Кол-во</td>
                        </div>
                        <div th:case="'Ценные бумаги'">
                            <td>-</td>
                            <td>-</td>
                        </div>
                        <div th:case="Судно">
                            <td th:text="${ps.getPledgeSubjectVessel().getDeadweight()}">0.00</td>
                            <td>дейдвейт</td>
                        </div>
                        <div th:case="*">
                            <td th:text="${ps.getPledgeSubjectRealty().getArea()}">0.00</td>
                            <td>кв.м.</td>
                        </div>
                    </div>

                    <div th:switch="${ps.getTypeOfCollateral()}">
                        <div th:case="'Авто/спецтехника'">
                            <td th:text="${ps.getPledgeSubjectAuto().getVin()}">0.00</td>
                            <td>VIN</td>
                        </div>
                        <div th:case="Оборудование">
                            <td th:text="${ps.getPledgeSubjectEquipment().getSerialNum()}">0.00</td>
                            <td>Завод№</td>
                        </div>
                        <div th:case="ТМЦ">
                            <td>-</td>
                            <td>-</td>
                        </div>
                        <div th:case="'Ценные бумаги'">
                            <td>-</td>
                            <td>-</td>
                        </div>
                        <div th:case="Судно">
                            <td th:text="${ps.getPledgeSubjectVessel().getImo()}">0.00</td>
                            <td>IMO</td>
                        </div>
                        <div th:case="*">
                            <td th:text="${ps.getPledgeSubjectRealty().getCadastralNum()}">0.00</td>
                            <td>Кад№</td>
                        </div>
                    </div>

                    <td th:text="${ps.getAdressRegion() + ', ' + ps.getAdressDistrict() + ', ' + ps.getAdressCity() + ', ' + ps.getAdressStreet() + ', ' + ps.getAdressBuilbing() + ', ' + ps.getAdressPemises()}">н/д</td>


                    <td>
                        <a th:href="@{/cost_history(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="cost_history.html"
                           th:text="${#numbers.formatCurrency(ps.getRsDz())}">н/д</a>
                    </td>

                    <td>
                        <a th:href="@{/cost_history(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="cost_history.html"
                           th:text="${#numbers.formatCurrency(ps.getZsDz())}">н/д</a>
                    </td>

                    <td>
                        <a th:href="@{/cost_history(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="cost_history.html"
                           th:text="${#numbers.formatCurrency(ps.getRsZz())}">н/д</a>
                    </td>

                    <td>
                        <a th:href="@{/cost_history(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="cost_history.html"
                           th:text="${#numbers.formatCurrency(ps.getZsZz())}">н/д</a>
                    </td>

                    <td>
                        <a th:href="@{/cost_history(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="cost_history.html"
                           th:text="${#numbers.formatCurrency(ps.getSs())}">н/д</a>
                    </td>

                    <td th:text="${ps.getDateConclusion()}"></td>

                    <td>
                        <a th:href="@{/monitoring_pledge_subject(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="monitoring_pledge_subject.html"
                           th:text="${ps.getDateMonitoring()}">н/д</a>
                    </td>

                    <td th:text="${ps.getTypeOfMonitoring()}"></td>

                    <td th:text="${ps.getStatusMonitoring()}"></td>

                    <td th:text="${ps.getLiquidity()}"></td>

                    <td th:text="${ps.getTypeOfPledge()}"></td>

                    <div th:switch="${ps.getInsuranceObligation()}">
                        <div th:case="да">
                            <td>
                                <a th:href="@{/insurances(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="insurances.html" th:text="да">да</a>
                            </td>
                        </div>
                        <div th:case="нет">
                            <td>нет</td>
                        </div>
                    </div>
                    <td>
                        <a th:href="@{/encumbrances(pledgeSubjectId=${ps.getPledgeSubjectId()})}" href="encumbrances.html" th:text="подробнее">подробнее</a>
                    </td>
                </tr>
            </div>
            </tbody>
        </table>
    </div>
</div>




</body>
</html>