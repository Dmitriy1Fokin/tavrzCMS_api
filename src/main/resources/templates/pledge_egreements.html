<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Договоры залога на сопровождении</title>
    <style type="text/css">
        body {
            padding: 50px;
        }

        .pledgeEgreement, .pledgeEgreement td {
            border: 1px solid lightgray;
            padding: 5px;
            table-layout: fixed;
        }
        .costs td{
            width: 500px;
        }
        .dates{
            width: 1000px;
        }
    </style>
</head>
<body>
<h1>Договоры залога:</h1>

<table class="pledgeEgreement">
    <thead>
    <tr>
        <th>№ДЗ</th>
        <th class="dates">Дата начала ДЗ</th>
        <th>Дата окончания ДЗ</th>
        <th>Залогодатель</th>
        <th>Описание предметов залога</th>
        <th>Количество предметов залога</th>
        <th>РС ДЗ</th>
        <th>ЗС ДЗ</th>
        <th>РС ЗЗ</th>
        <th>ЗС ЗЗ</th>
        <th>СС</th>
        <th>Дата ЗЗ</th>
        <th>Дата мониторинга</th>
        <th>Рузультат мониторинга</th>
    </tr>
    </thead>
    <tbody>
    <div th:each="pledgors : ${employee.getClients()}">
        <tr th:each="pe : ${pledgors.getPledgeEgreements()}">

            <td th:text="${pe.getNumPE()}"></td>

            <td th:text="${pe.getDateBeginPE()}"></td>

            <td th:text="${pe.getDateEndPE()}"></td>

            <div th:switch="${pledgors.getTypeOfClient()}">
                <div th:case="юл">
                    <td th:text="${pledgors.getClientLegalEntity().getOrganizationalForm() + ' ' + pledgors.getClientLegalEntity().getName()}"></td>
                </div>
                <div th:case="фл">
                    <td th:text="${pledgors.getClientIndividual().getSurname() + ' ' + pledgors.getClientIndividual().getName()}"></td>
                </div>
            </div>

            <td >
                <ol>
                    <div th:if="${pe.getPledgeSubjects().size() &gt; 5}">
                        <div th:each="ps, countStat: ${pe.getPledgeSubjects()}">
                            <div th:if="${countStat.index &lt; 5}" th:remove="tag">
                               <li th:text="${ps.getName()}"></li>
                            </div>
                        </div>
                        <span>...</span>
                    </div>
                    <div th:unless="${pe.getPledgeSubjects().size() &gt; 5}">
                        <div th:each="ps : ${pe.getPledgeSubjects()}">
                            <li th:text="${ps.getName()}"></li>
                        </div>
                    </div>
                </ol>
                <span>подробнее</span>
            </td>

            <td th:text="${pe.getPledgeSubjects().size()}">0</td>

            <!--<td th:text="${#numbers.formatDecimal(@pledgeEgreementService.getRsDz(pe.getPledgeEgreementId()), 0, 'COMMA', 2, 'POINT')}">0.00</td>-->
            <td th:text="${#numbers.formatCurrency(@pledgeEgreementService.getRsDz(pe.getPledgeEgreementId()))}" class="costs">0.00</td>

            <td th:text="${#numbers.formatCurrency(@pledgeEgreementService.getZsDz(pe.getPledgeEgreementId()))}" class="costs">0.00</td>

            <td th:text="${#numbers.formatCurrency(@pledgeEgreementService.getRsZz(pe.getPledgeEgreementId()))}" class="costs">0.00</td>

            <td th:text="${#numbers.formatCurrency(@pledgeEgreementService.getZsZz(pe.getPledgeEgreementId()))}" class="costs">0.00</td>

            <td th:text="${#numbers.formatCurrency(@pledgeEgreementService.getSs(pe.getPledgeEgreementId()))}" class="costs">0.00</td>

            <td>
                <div th:each="dateOfConclusion : ${@pledgeEgreementService.getDatesOfConclusion(pe.getPledgeEgreementId())}">
                    <span th:text="${dateOfConclusion}">н/д</span>
                </div>
            </td>

            <td>
                <div th:each="dateOfMonitoring : ${@pledgeEgreementService.getDatesOfMonitoring(pe.getPledgeEgreementId())}">
                    <span th:text="${dateOfMonitoring}">н/д</span>
                </div>
            </td>

            <td>
                <div th:each="resultsOfMonitoring : ${@pledgeEgreementService.getResultsOfMonitoring(pe.getPledgeEgreementId())}">
                    <span th:text="${resultsOfMonitoring}">н/д</span>
                </div>
            </td>


            <!--<td th:each="loanEgreement : ${pe.getLoanEgreements()}">-->
                <!--<ol>-->
                    <!--<li th:text="${loanEgreement.getNumLE()}"></li>-->
                <!--</ol>-->
            <!--</td>-->

        </tr>
    </div>

    <!--<tr th:each="pe : ${pledgeEgreements}">-->
        <!--<td th:text="${pe.getNumPE()}"></td>-->
        <!--<td th:text="${pe.getDateBeginPE()}"></td>-->
        <!--<td th:each="loanEgreement : ${pe.getLoanEgreements()}">-->
            <!--<a th:text="${loanEgreement.getNumLE()}"></a>-->
        <!--</td>-->
        <!--<td>-->
        <!--</td>-->
    <!--</tr>-->
    </tbody>
</table>
</body>
</html>